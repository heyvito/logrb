<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Logrb - logrb - Docrb - Docrb</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossOrigin="true" />
    <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@300;400;500&family=Inter:wght@300;400;500&display=swap" rel="stylesheet" />
    <link rel="stylesheet" type="text/css" href="/logrb/style.css" />
    <link rel="shortcut icon" href="/logrb/favicon.ico" type="image/x-icon"/>
    <link rel="icon" href="/logrb/favicon.ico" type="image/x-icon"/>
</head>
<body>
    
        <div class="class-header-base" >
    <div class="class">
        <h3 class="type">class</h3>
        <h1 class="class-name">Logrb</h1>
        
        
            <div class="defs">
                Defined in
                
                    
        <span class="def-link">
            
            <a href="https://github.com/heyvito/logrb/blob/1b8e8a6347aa893ecc3259e3def6c39dc3f0ab88./logrb/lib/logrb.rb#L35" class="dashed">logrb.rb
            </a>
        </span>
        
                
            </div>
        
        <details class="chevron-container">
            <summary>
                <svg width="22px" height="22px" xmlns="http://www.w3.org/2000/svg"><g transform="translate(1 1)" stroke="#FFF" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"><circle stroke-width="2" cx="10" cy="10" r="10"/><g stroke-width="1.5"><path d="M6 10.533l4 4 4-4M6 6l4 4 4-4"/></g></g></svg>
 <span class="collapsed">Show More</span> <span class="open">Show Less</span>
            </summary>

            <div class="toggles">
                <div class="column">
                    <div class="checkbox-base" >
    <input type="checkbox" id="filter-hide-internal" false/>
    <label for="filter-hide-internal">
        <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" class="checkbox-on">
  <g stroke-width="2" fill="none" fill-rule="evenodd">
    <rect stroke="#6200EE" fill="#6200EE" x="1" y="1" width="20" height="20" rx="2"/>
    <path stroke="#FFF" stroke-linecap="round" stroke-linejoin="round" d="m4.2961 11.446 4.1913 4.2424 9.2129-9.2071"/>
  </g>
</svg>
        <svg xmlns="http://www.w3.org/2000/svg" width="22px" height="22px" class="checkbox-off">
  <rect x="1" y="1" width="20" height="20" rx="2" stroke="#979797" stroke-width="2" fill="none" fill-rule="evenodd"/>
</svg>
        <span class="label">Hide internal members</span>
    </label>
</div>

                    <div class="checkbox-base" >
    <input type="checkbox" id="filter-hide-private" false/>
    <label for="filter-hide-private">
        <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" class="checkbox-on">
  <g stroke-width="2" fill="none" fill-rule="evenodd">
    <rect stroke="#6200EE" fill="#6200EE" x="1" y="1" width="20" height="20" rx="2"/>
    <path stroke="#FFF" stroke-linecap="round" stroke-linejoin="round" d="m4.2961 11.446 4.1913 4.2424 9.2129-9.2071"/>
  </g>
</svg>
        <svg xmlns="http://www.w3.org/2000/svg" width="22px" height="22px" class="checkbox-off">
  <rect x="1" y="1" width="20" height="20" rx="2" stroke="#979797" stroke-width="2" fill="none" fill-rule="evenodd"/>
</svg>
        <span class="label">Hide private members</span>
    </label>
</div>

                </div>
                <div class="column">
                    <div class="checkbox-base" >
    <input type="checkbox" id="filter-hide-attrs" false/>
    <label for="filter-hide-attrs">
        <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" class="checkbox-on">
  <g stroke-width="2" fill="none" fill-rule="evenodd">
    <rect stroke="#6200EE" fill="#6200EE" x="1" y="1" width="20" height="20" rx="2"/>
    <path stroke="#FFF" stroke-linecap="round" stroke-linejoin="round" d="m4.2961 11.446 4.1913 4.2424 9.2129-9.2071"/>
  </g>
</svg>
        <svg xmlns="http://www.w3.org/2000/svg" width="22px" height="22px" class="checkbox-off">
  <rect x="1" y="1" width="20" height="20" rx="2" stroke="#979797" stroke-width="2" fill="none" fill-rule="evenodd"/>
</svg>
        <span class="label">Hide attributes</span>
    </label>
</div>

                    <div class="checkbox-base" >
    <input type="checkbox" id="filter-hide-inherited" false/>
    <label for="filter-hide-inherited">
        <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" class="checkbox-on">
  <g stroke-width="2" fill="none" fill-rule="evenodd">
    <rect stroke="#6200EE" fill="#6200EE" x="1" y="1" width="20" height="20" rx="2"/>
    <path stroke="#FFF" stroke-linecap="round" stroke-linejoin="round" d="m4.2961 11.446 4.1913 4.2424 9.2129-9.2071"/>
  </g>
</svg>
        <svg xmlns="http://www.w3.org/2000/svg" width="22px" height="22px" class="checkbox-off">
  <rect x="1" y="1" width="20" height="20" rx="2" stroke="#979797" stroke-width="2" fill="none" fill-rule="evenodd"/>
</svg>
        <span class="label">Hide inherited members</span>
    </label>
</div>

                </div>
                <div class="column">
                    <div class="checkbox-base" >
    <input type="checkbox" id="filter-show-extended" checked/>
    <label for="filter-show-extended">
        <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" class="checkbox-on">
  <g stroke-width="2" fill="none" fill-rule="evenodd">
    <rect stroke="#6200EE" fill="#6200EE" x="1" y="1" width="20" height="20" rx="2"/>
    <path stroke="#FFF" stroke-linecap="round" stroke-linejoin="round" d="m4.2961 11.446 4.1913 4.2424 9.2129-9.2071"/>
  </g>
</svg>
        <svg xmlns="http://www.w3.org/2000/svg" width="22px" height="22px" class="checkbox-off">
  <rect x="1" y="1" width="20" height="20" rx="2" stroke="#979797" stroke-width="2" fill="none" fill-rule="evenodd"/>
</svg>
        <span class="label">Show extended members</span>
    </label>
</div>

                    <div class="checkbox-base" >
    <input type="checkbox" id="filter-show-included" checked/>
    <label for="filter-show-included">
        <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" class="checkbox-on">
  <g stroke-width="2" fill="none" fill-rule="evenodd">
    <rect stroke="#6200EE" fill="#6200EE" x="1" y="1" width="20" height="20" rx="2"/>
    <path stroke="#FFF" stroke-linecap="round" stroke-linejoin="round" d="m4.2961 11.446 4.1913 4.2424 9.2129-9.2071"/>
  </g>
</svg>
        <svg xmlns="http://www.w3.org/2000/svg" width="22px" height="22px" class="checkbox-off">
  <rect x="1" y="1" width="20" height="20" rx="2" stroke="#979797" stroke-width="2" fill="none" fill-rule="evenodd"/>
</svg>
        <span class="label">Show included members</span>
    </label>
</div>

                </div>
            </div>
        </details>
    </div>
    <div class="right">
        <a href="https://github.com/heyvito/docrb" rel="noreferrer" target="_blank">
            <svg width="112px" height="37px" viewBox="0 0 112 37" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <g id="Artboard" transform="translate(-1312.000000, 0.000000)">
            <g id="Group-4" transform="translate(1312.000000, 0.000000)">
                <path d="M0,0 L112,0 L112,34 C112,35.6568542 110.656854,37 109,37 L3,37 C1.34314575,37 2.02906125e-16,35.6568542 0,34 L0,0 L0,0 Z" id="Rectangle" fill="#161617"></path>
                <g id="Group-Copy">
                    <g transform="translate(13.000000, 4.000000)">
                        <g id="book-open" stroke-linecap="round" stroke-linejoin="round">
                            <g transform="translate(0.000000, 5.117647)">
                                <path d="M0,0 L6.7876161,0 C9.28674734,0 11.3126935,2.05006457 11.3126935,4.57894737 L11.3126935,20.6052632 C11.3126935,18.7086011 9.79323388,17.1710526 7.91888545,17.1710526 L0,17.1710526 L0,0 Z" id="Path" stroke="#636363" stroke-width="2"></path>
                                <path d="M23.0294118,0 L16.2417957,0 C13.7426644,0 11.7167183,2.05006457 11.7167183,4.57894737 L11.7167183,20.6052632 C11.7167183,18.7086011 13.2361779,17.1710526 15.1105263,17.1710526 L23.0294118,17.1710526 L23.0294118,0 Z" id="Path" stroke="#636363" stroke-width="2"></path>
                            </g>
                        </g>
                        <path d="M35.2783187,22.1764706 C40.3159978,22.1764706 43.1864934,19.0279212 43.1946715,13.7612568 C43.1946715,8.5518387 40.3650661,5.42782346 35.5727285,5.42782346 L30.3714885,5.42782346 L30.3714885,22.1764706 L35.2783187,22.1764706 Z M35.1883602,20.8025581 L31.9007839,20.8025581 L31.9007839,6.80173592 L35.48277,6.80173592 C39.547261,6.80173592 41.7062663,9.42689008 41.7144444,13.7612568 C41.7144444,18.1365137 39.5063708,20.8025581 35.1883602,20.8025581 Z M50.1191479,22.4381682 C53.3740119,22.4381682 55.6475099,19.7803018 55.6475099,15.9529743 C55.6475099,12.1011125 53.3740119,9.44324618 50.1191479,9.44324618 C46.8642838,9.44324618 44.5907858,12.1011125 44.5907858,15.9529743 C44.5907858,19.7803018 46.8642838,22.4381682 50.1191479,22.4381682 Z M50.1191479,21.105146 C47.5103498,21.105146 46.0546568,18.7662236 46.0546568,15.9529743 C46.0546568,13.1397249 47.5103498,10.7680903 50.1191479,10.7680903 C52.7279459,10.7680903 54.1836389,13.1397249 54.1836389,15.9529743 C54.1836389,18.7662236 52.7279459,21.105146 50.1191479,21.105146 Z M62.4002444,22.4381682 C65.0172205,22.4381682 66.8572819,20.786202 67.1925819,18.512704 L65.7205329,18.512704 C65.3852328,20.1156019 64.0685667,21.105146 62.4002444,21.105146 C59.9386513,21.105146 58.3112193,18.9624968 58.3112193,15.903906 C58.3112193,12.8616712 59.9877196,10.7680903 62.4002444,10.7680903 C64.1912375,10.7680903 65.4015889,11.9211954 65.7123548,13.3441762 L67.1844039,13.3441762 C66.8409258,11.0134319 64.8945498,9.44324618 62.3757103,9.44324618 C59.088134,9.44324618 56.8473482,12.174715 56.8473482,15.9529743 C56.8473482,19.6985213 59.0227096,22.4381682 62.4002444,22.4381682 Z M70.412398,22.1764706 L70.412398,14.0638446 C70.412398,12.1992492 71.8435568,10.8498708 73.8062889,10.8498708 C74.1906572,10.8498708 74.5504914,10.9152952 74.6813403,10.9316513 L74.6813403,9.45142423 C74.485067,9.44324618 74.149767,9.42689008 73.9126035,9.42689008 C72.3342398,9.42689008 70.9848615,10.2774073 70.4778224,11.5450051 L70.3715077,11.5450051 L70.3715077,9.61498524 L68.956705,9.61498524 L68.956705,22.1764706 L70.412398,22.1764706 Z M81.5730965,22.4381682 C84.6562215,22.4381682 86.7416243,19.8293701 86.7416243,15.9284401 C86.7416243,12.0602223 84.6480434,9.44324618 81.5485623,9.44324618 C79.2505302,9.44324618 78.2119178,10.882583 77.7130567,12.011154 L77.5822079,12.011154 L77.5822079,5.42782346 L76.1183369,5.42782346 L76.1183369,22.1764706 L77.5331396,22.1764706 L77.5331396,19.8457262 L77.7130567,19.8457262 C78.2200959,20.9988313 79.2832424,22.4381682 81.5730965,22.4381682 Z M81.3931794,21.105146 C78.9561204,21.105146 77.5576738,18.9379626 77.5576738,15.903906 C77.5576738,12.8943834 78.9397643,10.7680903 81.3931794,10.7680903 C83.9120189,10.7680903 85.2777533,13.0088761 85.2777533,15.903906 C85.2777533,18.831648 83.8956628,21.105146 81.3931794,21.105146 Z" id="Docrb" fill="#636363" fill-rule="nonzero"></path>
                    </g>
                </g>
            </g>
        </g>
    </g>
</svg>

        </a>
    </div>
</div>
<div class="breadcrumb-base" >
    <div class="link">
        <a href="/logrb/">
            <svg width="14px" height="15px" xmlns="http://www.w3.org/2000/svg"><g stroke="#FFF" stroke-width="1.333" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"><path d="M1 5.667L7 1l6 4.667V13c0 .736-.597 1.333-1.333 1.333H2.333A1.333 1.333 0 011 13V5.667z"/><path d="M5 14.333V7.667h4v6.666"/></g></svg>

            <span class="padded">
            logrb
        </span>
        </a>
    </div>
    
        <svg width="31" height="59" xmlns="http://www.w3.org/2000/svg"><path d="M1 1l28 29L1 58" stroke="#1C1C1E" stroke-width="2" fill="none" fill-rule="evenodd"/></svg>

        <div class="link">
            
                <a href="/logrb/components.html">
                <span class="padded">
                    Components
                </span>
                </a>
            
        </div>
    
        <svg width="31" height="59" xmlns="http://www.w3.org/2000/svg"><path d="M1 1l28 29L1 58" stroke="#1C1C1E" stroke-width="2" fill="none" fill-rule="evenodd"/></svg>

        <div class="link">
            
                <a href="/logrb/Logrb.html">
            <span class="padded">
                Logrb
            </span>
                </a>
            
        </div>
    
</div>
<div class="doc-box-base" >
    <div class="left">
        <div class="documentation-block-base" >
    
        
            <div class="documentation-comment-base" >
    
        <div class="text-block-base" >
    
        <div class="html">
            
                
                    <span>Logrb provides a facility for working with logs in text and json formats. All instances share a single mutex to ensure logging consistency. The following attributes are available:</span>
                
            
        </div>
    
</div>

    
</div>

        
            <div class="documentation-comment-base" >
    
        <div class="field-block-base" >
    <h3>Arguments</h3>
    <table>
        <tbody>
        
            <tr>
                <td class="name">fields</td>
                <td class="value">
                    <div class="documentation-comment-base" >
    
        <div class="text-block-base" >
    
        <div class="html">
            
                
                    <span>A hash containing metadata to be included in logs emitted by this instance.</span>
                
            
        </div>
    
</div>

    
</div>

                </td>
            </tr>
        
            <tr>
                <td class="name">level</td>
                <td class="value">
                    <div class="documentation-comment-base" >
    
        <div class="text-block-base" >
    
        <div class="html">
            
                
                    <span>The level filter for the instance. Valid values are </span>
                
            
                
                    <div class="documentation-comment-base" >
    
        <div class="symbol-base" >
    :error
</div>

    
</div>

                
            
                
                    <span>, </span>
                
            
                
                    <div class="documentation-comment-base" >
    
        <div class="symbol-base" >
    :fatal
</div>

    
</div>

                
            
                
                    <span>, </span>
                
            
                
                    <div class="documentation-comment-base" >
    
        <div class="symbol-base" >
    :info
</div>

    
</div>

                
            
                
                    <span>, </span>
                
            
                
                    <div class="documentation-comment-base" >
    
        <div class="symbol-base" >
    :warn
</div>

    
</div>

                
            
                
                    <span>, and </span>
                
            
                
                    <div class="documentation-comment-base" >
    
        <div class="symbol-base" >
    :debug
</div>

    
</div>

                
            
                
                    <span></span>
                
            
        </div>
    
</div>

    
</div>

                </td>
            </tr>
        
            <tr>
                <td class="name">format</td>
                <td class="value">
                    <div class="documentation-comment-base" >
    
        <div class="text-block-base" >
    
        <div class="html">
            
                
                    <span>The format to output logs. Supports </span>
                
            
                
                    <div class="documentation-comment-base" >
    
        <div class="symbol-base" >
    :text
</div>

    
</div>

                
            
                
                    <span> and </span>
                
            
                
                    <div class="documentation-comment-base" >
    
        <div class="symbol-base" >
    :json
</div>

    
</div>

                
            
                
                    <span>.</span>
                
            
        </div>
    
</div>

    
</div>

                </td>
            </tr>
        
        </tbody>
    </table>
</div>

    
</div>

        
            <div class="documentation-comment-base" >
    
        <div class="text-block-base" >
    
        <div class="html">
            
                
                    <span>Each instance exposes the following methods, which accepts an arbitrary number of key-value pairs to be included in the logged message:</span>
                
            
        </div>
    
</div>

    
</div>

        
            <div class="documentation-comment-base" >
    
        <div class="text-block-base" >
    
        <div class="html">
            
                
                    <div class="documentation-comment-base" >
    
        <a class="method-ref dashed" href="/logrb/Logrb.html#instance-method-error">#error(msg, error=nil, **fields)</a>
    
</div>

                
            
                
                    <span>: Outputs an error entry. When <code>error</code> is present, attempts to obtain backtrace information and also includes it to the emitted entry.</span>
                
            
        </div>
    
</div>

    
</div>

        
            <div class="documentation-comment-base" >
    
        <div class="text-block-base" >
    
        <div class="html">
            
                
                    <div class="documentation-comment-base" >
    
        <a class="method-ref dashed" href="/logrb/Logrb.html#instance-method-fatal">#fatal(msg, **fields)</a>
    
</div>

                
            
                
                    <span>: Outputs a fatal entry. Calling fatal causes the current process to exit with a status 1.</span>
                
            
        </div>
    
</div>

    
</div>

        
            <div class="documentation-comment-base" >
    
        <div class="text-block-base" >
    
        <div class="html">
            
                
                    <div class="documentation-comment-base" >
    
        <code>#warn(msg, **fields)</code>
    
</div>

                
            
                
                    <span>: Outputs a warning entry.</span>
                
            
        </div>
    
</div>

    
</div>

        
            <div class="documentation-comment-base" >
    
        <div class="text-block-base" >
    
        <div class="html">
            
                
                    <div class="documentation-comment-base" >
    
        <code>#info(msg, **fields)</code>
    
</div>

                
            
                
                    <span>: Outputs a informational entry.</span>
                
            
        </div>
    
</div>

    
</div>

        
            <div class="documentation-comment-base" >
    
        <div class="text-block-base" >
    
        <div class="html">
            
                
                    <div class="documentation-comment-base" >
    
        <code>#debug(msg, **fields)</code>
    
</div>

                
            
                
                    <span>: Outputs a debug entry.</span>
                
            
        </div>
    
</div>

    
</div>

        
            <div class="documentation-comment-base" >
    
        <div class="text-block-base" >
    
        <div class="html">
            
                
                    <div class="documentation-comment-base" >
    
        <a class="method-ref dashed" href="/logrb/Logrb.html#instance-method-dump">#dump(msg, data=nil)</a>
    
</div>

                
            
                
                    <span>: Outputs a given String or Array of bytes using the same format as <code>hexdump -C</code>.</span>
                
            
        </div>
    
</div>

    
</div>

        
    
</div>

        

        
            <div class="section-container" id="constants">
                <h3 class="heading">Constants</h3>
                
                    
                    <div class="constant-container"
                         data-origin=""
                         data-type="Constant"
                         id="const-VERSION"
                    >
                        
                        <a class="dashed" href="/logrb/Logrb.html#const-VERSION"><span class="name">VERSION</span></a>
                        <div class="doc-block">
                            <div class="documentation-block-base" >
    
        <div class="faded">(No documentation available)</div>
    
</div>

                        </div>
                    </div>
                
                    
                    <div class="constant-container"
                         data-origin=""
                         data-type="Constant"
                         id="const-COLORS"
                    >
                        
                        <a class="dashed" href="/logrb/Logrb.html#const-COLORS"><span class="name">COLORS</span></a>
                        <div class="doc-block">
                            <div class="documentation-block-base" >
    
        <div class="faded">(No documentation available)</div>
    
</div>

                        </div>
                    </div>
                
                    
                    <div class="constant-container"
                         data-origin=""
                         data-type="Constant"
                         id="const-BACKGROUNDS"
                    >
                        
                        <a class="dashed" href="/logrb/Logrb.html#const-BACKGROUNDS"><span class="name">BACKGROUNDS</span></a>
                        <div class="doc-block">
                            <div class="documentation-block-base" >
    
        <div class="faded">(No documentation available)</div>
    
</div>

                        </div>
                    </div>
                
                    
                    <div class="constant-container"
                         data-origin=""
                         data-type="Constant"
                         id="const-LEVELS"
                    >
                        
                        <a class="dashed" href="/logrb/Logrb.html#const-LEVELS"><span class="name">LEVELS</span></a>
                        <div class="doc-block">
                            <div class="documentation-block-base" >
    
        <div class="faded">(No documentation available)</div>
    
</div>

                        </div>
                    </div>
                
            </div>
        

        

        
            <div class="section-container" id="instance-attributes">
                <h3 class="heading">Instance Attributes</h3>
                
                    <div class="attribute-container"
     data-origin=""
     data-type="attribute"
     id="instance-attr-fields"
>
    <div class="method-display-base" >
    
    
    
    
        <a class="dashed" href="/logrb/Logrb.html#accessor-attr-fields">
        <div class="container">
            <div class="method-name">fields</div>
        </div>
    </a>
    
    <div class="label">read/write</div>
    
</div>

    <div class="doc-block">
        <div class="documentation-block-base" >
    
        <div class="faded">(No documentation available)</div>
    
</div>

    </div>
</div>

                
                    <div class="attribute-container"
     data-origin=""
     data-type="attribute"
     id="instance-attr-level"
>
    <div class="method-display-base" >
    
    
    
    
        <a class="dashed" href="/logrb/Logrb.html#accessor-attr-level">
        <div class="container">
            <div class="method-name">level</div>
        </div>
    </a>
    
    <div class="label">read/write</div>
    
</div>

    <div class="doc-block">
        <div class="documentation-block-base" >
    
        <div class="faded">(No documentation available)</div>
    
</div>

    </div>
</div>

                
                    <div class="attribute-container"
     data-origin=""
     data-type="attribute"
     id="instance-attr-format"
>
    <div class="method-display-base" >
    
    
    
    
        <a class="dashed" href="/logrb/Logrb.html#accessor-attr-format">
        <div class="container">
            <div class="method-name">format</div>
        </div>
    </a>
    
    <div class="label">read/write</div>
    
</div>

    <div class="doc-block">
        <div class="documentation-block-base" >
    
        <div class="faded">(No documentation available)</div>
    
</div>

    </div>
</div>

                
            </div>
        
        
            <div class="section-container" id="class-methods">
                <h3 class="heading">Class Methods</h3>
                <div class="method-list-base" >
    
        <div class="method-definition"
             id="class-method-mutex"
             data-visibility=""
             data-origin="">
            <div class="method-block">
                <div class="method-display-base" >
    
    
    <a class="dashed" href="/logrb/Logrb.html#class-method-mutex">
        <div class="container">
            <div class="method-name">mutex</div>
            
                <div class="argument-container">
                    
                </div>
            
        </div>
    </a>
    <div class="label">public</div>
</div>

            </div>
            
            
            <div class="doc-block">
                <div class="documentation-block-base" >
    
        
            <div class="documentation-comment-base" >
    
        <div class="text-block-base" >
    
        <div class="html">
            
                
                    <span>A mutex instance used for synchronizing the usage of the output IO.</span>
                
            
        </div>
    
</div>

    
</div>

        
    
</div>

            </div>
            <details class="source-block">
                <summary>
                    <span class="expanded">Hide Source</span>
                    <span class="collapsed">Show Source</span>
                </summary>
                <div class="markdown-base" >
<div class="highlight"><pre class="highlight ruby"><code><span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">mutex</span>
  <span class="vi">@mutex</span> <span class="o">||=</span> <span class="no">Mutex</span><span class="p">.</span><span class="nf">new</span>
<span class="k">end</span>
</code></pre></div>
</div>

                <div class="from">
                    Defined in
                    <a href="https://github.com/heyvito/logrb/blob/1b8e8a6347aa893ecc3259e3def6c39dc3f0ab88./logrb/lib/logrb.rb#L65" class="dotted">./logrb/lib/logrb.rb
                        , lines 65 to 67</a>
                </div>
            </details>
        </div>
    
</div>

            </div>
        
        
            <div class="section-container" id="instance-methods">
                <h3 class="heading">Instance Methods</h3>
                <div class="method-list-base" >
    
        <div class="method-definition"
             id="instance-method-initialize"
             data-visibility=""
             data-origin="">
            <div class="method-block">
                <div class="method-display-base" >
    
    
    <a class="dashed" href="/logrb/Logrb.html#instance-method-initialize">
        <div class="container">
            <div class="method-name">initialize</div>
            
                <div class="argument-container not-empty">
                    
                        <div class="method-argument-base" >
    

    
        output
    


    

    
    
</div>

                    
                        <div class="method-argument-base" >
    

    
        format
    


    
        <span class="continuation colon"></span>
    

    
        <span class="simple-argument symbol">:text</span>
    
</div>

                    
                        <div class="method-argument-base" >
    

    
        level
    


    
        <span class="continuation colon"></span>
    

    
        <span class="simple-argument symbol">:debug</span>
    
</div>

                    
                        <div class="method-argument-base" >
    
        <span class="rest-arg double"></span>
    

    
        fields
    


    

    
    
</div>

                    
                </div>
            
        </div>
    </a>
    <div class="label">public</div>
</div>

            </div>
            
            
            <div class="doc-block">
                <div class="documentation-block-base" >
    
        
            <div class="documentation-comment-base" >
    
        <div class="text-block-base" >
    
        <div class="html">
            
                
                    <span>Initializes a new Logger instance that outputs logs to a provided output.</span>
                
            
        </div>
    
</div>

    
</div>

        
            <div class="documentation-comment-base" >
    
        <div class="field-block-base" >
    <h3>Arguments</h3>
    <table>
        <tbody>
        
            <tr>
                <td class="name">output</td>
                <td class="value">
                    <div class="documentation-comment-base" >
    
        <div class="text-block-base" >
    
        <div class="html">
            
                
                    <span>an IO-like object that implements a </span>
                
            
                
                    <div class="documentation-comment-base" >
    
        <code>#write</code>
    
</div>

                
            
                
                    <span> method.</span>
                
            
        </div>
    
</div>

    
</div>

                </td>
            </tr>
        
            <tr>
                <td class="name">format</td>
                <td class="value">
                    <div class="documentation-comment-base" >
    
        <div class="text-block-base" >
    
        <div class="html">
            
                
                    <span>Optional. Indicates the format used to output log entries. Supports </span>
                
            
                
                    <div class="documentation-comment-base" >
    
        <div class="symbol-base" >
    :text
</div>

    
</div>

                
            
                
                    <span> (default) and </span>
                
            
                
                    <div class="documentation-comment-base" >
    
        <div class="symbol-base" >
    :json
</div>

    
</div>

                
            
                
                    <span>.</span>
                
            
        </div>
    
</div>

    
</div>

                </td>
            </tr>
        
            <tr>
                <td class="name">level</td>
                <td class="value">
                    <div class="documentation-comment-base" >
    
        <div class="text-block-base" >
    
        <div class="html">
            
                
                    <span>Level to filter this logger instance</span>
                
            
        </div>
    
</div>

    
</div>

                </td>
            </tr>
        
            <tr>
                <td class="name">fields</td>
                <td class="value">
                    <div class="documentation-comment-base" >
    
        <div class="text-block-base" >
    
        <div class="html">
            
                
                    <span>Fields to include in emitted entries</span>
                
            
        </div>
    
</div>

    
</div>

                </td>
            </tr>
        
        </tbody>
    </table>
</div>

    
</div>

        
    
</div>

            </div>
            <details class="source-block">
                <summary>
                    <span class="expanded">Hide Source</span>
                    <span class="collapsed">Show Source</span>
                </summary>
                <div class="markdown-base" >
<div class="highlight"><pre class="highlight ruby"><code><span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">output</span><span class="p">,</span> <span class="ss">format: :text</span><span class="p">,</span> <span class="ss">level: :debug</span><span class="p">,</span> <span class="o">**</span><span class="n">fields</span><span class="p">)</span>
  <span class="vi">@output</span> <span class="o">=</span> <span class="n">output</span>
  <span class="vi">@format</span> <span class="o">=</span> <span class="nb">format</span>
  <span class="vi">@fields</span> <span class="o">=</span> <span class="n">fields</span>
  <span class="vi">@level</span> <span class="o">=</span> <span class="n">level</span>
<span class="k">end</span>
</code></pre></div>
</div>

                <div class="from">
                    Defined in
                    <a href="https://github.com/heyvito/logrb/blob/1b8e8a6347aa893ecc3259e3def6c39dc3f0ab88./logrb/lib/logrb.rb#L76" class="dotted">./logrb/lib/logrb.rb
                        , lines 76 to 81</a>
                </div>
            </details>
        </div>
    
        <div class="method-definition"
             id="instance-method-with_fields"
             data-visibility=""
             data-origin="">
            <div class="method-block">
                <div class="method-display-base" >
    
    
    <a class="dashed" href="/logrb/Logrb.html#instance-method-with_fields">
        <div class="container">
            <div class="method-name">with_fields</div>
            
                <div class="argument-container not-empty">
                    
                        <div class="method-argument-base" >
    
        <span class="rest-arg double"></span>
    

    
        fields
    


    

    
    
</div>

                    
                </div>
            
        </div>
    </a>
    <div class="label">public</div>
</div>

            </div>
            
            
            <div class="doc-block">
                <div class="documentation-block-base" >
    
        
            <div class="documentation-comment-base" >
    
        <div class="text-block-base" >
    
        <div class="html">
            
                
                    <span>Returns a new logger instance using the same output of its parent&#39;s, with an optional set of fields to be merged against the parent&#39;s fields.</span>
                
            
        </div>
    
</div>

    
</div>

        
            <div class="documentation-comment-base" >
    
        <div class="field-block-base" >
    <h3>Arguments</h3>
    <table>
        <tbody>
        
            <tr>
                <td class="name">fields</td>
                <td class="value">
                    <div class="documentation-comment-base" >
    
        <div class="text-block-base" >
    
        <div class="html">
            
                
                    <span>A Hash containing metadata to be included in all output entries emitted from the returned instance.</span>
                
            
        </div>
    
</div>

    
</div>

                </td>
            </tr>
        
        </tbody>
    </table>
</div>

    
</div>

        
    
</div>

            </div>
            <details class="source-block">
                <summary>
                    <span class="expanded">Hide Source</span>
                    <span class="collapsed">Show Source</span>
                </summary>
                <div class="markdown-base" >
<div class="highlight"><pre class="highlight ruby"><code><span class="k">def</span> <span class="nf">with_fields</span><span class="p">(</span><span class="o">**</span><span class="n">fields</span><span class="p">)</span>
  <span class="n">inst</span> <span class="o">=</span> <span class="no">Logrb</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="vi">@output</span><span class="p">,</span> <span class="ss">format: </span><span class="vi">@format</span><span class="p">,</span> <span class="ss">level: </span><span class="vi">@level</span><span class="p">)</span>
  <span class="n">inst</span><span class="p">.</span><span class="nf">fields</span> <span class="o">=</span> <span class="vi">@fields</span><span class="p">.</span><span class="nf">merge</span><span class="p">(</span><span class="n">fields</span><span class="p">)</span>
  <span class="n">inst</span>
<span class="k">end</span>
</code></pre></div>
</div>

                <div class="from">
                    Defined in
                    <a href="https://github.com/heyvito/logrb/blob/1b8e8a6347aa893ecc3259e3def6c39dc3f0ab88./logrb/lib/logrb.rb#L88" class="dotted">./logrb/lib/logrb.rb
                        , lines 88 to 92</a>
                </div>
            </details>
        </div>
    
        <div class="method-definition"
             id="instance-method-error"
             data-visibility=""
             data-origin="">
            <div class="method-block">
                <div class="method-display-base" >
    
    
    <a class="dashed" href="/logrb/Logrb.html#instance-method-error">
        <div class="container">
            <div class="method-name">error</div>
            
                <div class="argument-container not-empty">
                    
                        <div class="method-argument-base" >
    

    
        msg
    


    

    
    
</div>

                    
                        <div class="method-argument-base" >
    

    
        error
    


    
        <span class="continuation equal"></span>
    

    
        <span class="simple-argument symbol">nil</span>
    
</div>

                    
                        <div class="method-argument-base" >
    
        <span class="rest-arg double"></span>
    

    
        fields
    


    

    
    
</div>

                    
                </div>
            
        </div>
    </a>
    <div class="label">public</div>
</div>

            </div>
            
            
            <div class="doc-block">
                <div class="documentation-block-base" >
    
        
            <div class="documentation-comment-base" >
    
        <div class="text-block-base" >
    
        <div class="html">
            
                
                    <span>Emits an error to the log output. When error is provided, this method attempts to gather a stacktrace to include in the emitted entry.</span>
                
            
        </div>
    
</div>

    
</div>

        
    
</div>

            </div>
            <details class="source-block">
                <summary>
                    <span class="expanded">Hide Source</span>
                    <span class="collapsed">Show Source</span>
                </summary>
                <div class="markdown-base" >
<div class="highlight"><pre class="highlight ruby"><code><span class="k">def</span> <span class="nf">error</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="n">error</span> <span class="o">=</span> <span class="kp">nil</span><span class="p">,</span> <span class="o">**</span><span class="n">fields</span><span class="p">)</span>
  <span class="k">return</span> <span class="k">if</span> <span class="no">LEVELS</span><span class="p">[</span><span class="vi">@level</span><span class="p">]</span> <span class="o">&gt;</span> <span class="no">LEVELS</span><span class="p">[</span><span class="ss">:error</span><span class="p">]</span>
   <span class="n">wrap</span><span class="p">(</span><span class="ss">:error</span><span class="p">,</span> <span class="n">msg</span><span class="p">,</span> <span class="n">error</span><span class="p">,</span> <span class="n">fields</span><span class="p">)</span>
  <span class="kp">nil</span>
<span class="k">end</span>
</code></pre></div>
</div>

                <div class="from">
                    Defined in
                    <a href="https://github.com/heyvito/logrb/blob/1b8e8a6347aa893ecc3259e3def6c39dc3f0ab88./logrb/lib/logrb.rb#L105" class="dotted">./logrb/lib/logrb.rb
                        , lines 105 to 110</a>
                </div>
            </details>
        </div>
    
        <div class="method-definition"
             id="instance-method-fatal"
             data-visibility=""
             data-origin="">
            <div class="method-block">
                <div class="method-display-base" >
    
    
    <a class="dashed" href="/logrb/Logrb.html#instance-method-fatal">
        <div class="container">
            <div class="method-name">fatal</div>
            
                <div class="argument-container not-empty">
                    
                        <div class="method-argument-base" >
    

    
        msg
    


    

    
    
</div>

                    
                        <div class="method-argument-base" >
    

    
        error
    


    
        <span class="continuation equal"></span>
    

    
        <span class="simple-argument symbol">nil</span>
    
</div>

                    
                        <div class="method-argument-base" >
    
        <span class="rest-arg double"></span>
    

    
        fields
    


    

    
    
</div>

                    
                </div>
            
        </div>
    </a>
    <div class="label">public</div>
</div>

            </div>
            
            
            <div class="doc-block">
                <div class="documentation-block-base" >
    
        
            <div class="documentation-comment-base" >
    
        <div class="text-block-base" >
    
        <div class="html">
            
                
                    <span>Emits a fatal message to the log output, and invokes </span>
                
            
                
                    <div class="documentation-comment-base" >
    
        <code>Kernel#exit</code>
    
</div>

                
            
                
                    <span>with a non-zero status code. When error is provided, this method attempts to gather a stacktrace to include in the emitted entry. This log entry cannot be filtered, and is always emitted.</span>
                
            
        </div>
    
</div>

    
</div>

        
    
</div>

            </div>
            <details class="source-block">
                <summary>
                    <span class="expanded">Hide Source</span>
                    <span class="collapsed">Show Source</span>
                </summary>
                <div class="markdown-base" >
<div class="highlight"><pre class="highlight ruby"><code><span class="k">def</span> <span class="nf">fatal</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="n">error</span> <span class="o">=</span> <span class="kp">nil</span><span class="p">,</span> <span class="o">**</span><span class="n">fields</span><span class="p">)</span>
  <span class="n">wrap</span><span class="p">(</span><span class="ss">:fatal</span><span class="p">,</span> <span class="n">msg</span><span class="p">,</span> <span class="n">error</span><span class="p">,</span> <span class="n">fields</span><span class="p">)</span>
  <span class="nb">exit</span> <span class="mi">1</span>
<span class="k">end</span>
</code></pre></div>
</div>

                <div class="from">
                    Defined in
                    <a href="https://github.com/heyvito/logrb/blob/1b8e8a6347aa893ecc3259e3def6c39dc3f0ab88./logrb/lib/logrb.rb#L116" class="dotted">./logrb/lib/logrb.rb
                        , lines 116 to 119</a>
                </div>
            </details>
        </div>
    
        <div class="method-definition"
             id="instance-method-dump"
             data-visibility=""
             data-origin="">
            <div class="method-block">
                <div class="method-display-base" >
    
    
    <a class="dashed" href="/logrb/Logrb.html#instance-method-dump">
        <div class="container">
            <div class="method-name">dump</div>
            
                <div class="argument-container not-empty">
                    
                        <div class="method-argument-base" >
    

    
        log
    


    

    
    
</div>

                    
                        <div class="method-argument-base" >
    

    
        data
    


    
        <span class="continuation equal"></span>
    

    
        <span class="simple-argument symbol">nil</span>
    
</div>

                    
                        <div class="method-argument-base" >
    
        <span class="rest-arg double"></span>
    

    
        fields
    


    

    
    
</div>

                    
                </div>
            
        </div>
    </a>
    <div class="label">public</div>
</div>

            </div>
            
            
            <div class="doc-block">
                <div class="documentation-block-base" >
    
        
            <div class="documentation-comment-base" >
    
        <div class="text-block-base" >
    
        <div class="html">
            
                
                    <span>Dumps a given String or Array in the same format as <code>hexdump -C</code>.</span>
                
            
        </div>
    
</div>

    
</div>

        
    
</div>

            </div>
            <details class="source-block">
                <summary>
                    <span class="expanded">Hide Source</span>
                    <span class="collapsed">Show Source</span>
                </summary>
                <div class="markdown-base" >
<div class="highlight"><pre class="highlight ruby"><code><span class="k">def</span> <span class="nf">dump</span><span class="p">(</span><span class="n">log</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="kp">nil</span><span class="p">,</span> <span class="o">**</span><span class="n">fields</span><span class="p">)</span>
  <span class="k">return</span> <span class="k">if</span> <span class="no">LEVELS</span><span class="p">[</span><span class="vi">@level</span><span class="p">]</span> <span class="o">&gt;</span> <span class="no">LEVELS</span><span class="p">[</span><span class="ss">:debug</span><span class="p">]</span>
   <span class="k">if</span> <span class="n">data</span><span class="p">.</span><span class="nf">nil?</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">log</span>
    <span class="n">log</span> <span class="o">=</span> <span class="kp">nil</span>
  <span class="k">end</span>
   <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="s2">"C*"</span><span class="p">)</span> <span class="k">if</span> <span class="n">data</span><span class="p">.</span><span class="nf">is_a?</span> <span class="no">Array</span>
  <span class="n">dump</span> <span class="o">=</span> <span class="p">[]</span>
  <span class="n">padding</span> <span class="o">=</span> <span class="vi">@format</span> <span class="o">==</span> <span class="ss">:json</span> <span class="p">?</span> <span class="s2">""</span> <span class="p">:</span> <span class="s2">"        "</span>
  <span class="no">Hexdump</span><span class="p">.</span><span class="nf">dump</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="ss">output: </span><span class="n">dump</span><span class="p">)</span>
  <span class="n">dump</span><span class="p">.</span><span class="nf">map!</span> <span class="p">{</span> <span class="o">|</span><span class="n">line</span><span class="o">|</span> <span class="s2">"</span><span class="si">#{</span><span class="n">padding</span><span class="si">}#{</span><span class="n">line</span><span class="p">.</span><span class="nf">chomp</span><span class="si">}</span><span class="s2">"</span> <span class="p">}</span>
  <span class="n">dump</span> <span class="o">=</span> <span class="n">dump</span><span class="p">.</span><span class="nf">join</span><span class="p">(</span><span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">)</span>
   <span class="k">if</span> <span class="vi">@format</span> <span class="o">==</span> <span class="ss">:json</span>
    <span class="n">fields</span><span class="p">[</span><span class="ss">:dump</span><span class="p">]</span> <span class="o">=</span> <span class="n">dump</span>
    <span class="n">dump</span> <span class="o">=</span> <span class="kp">nil</span>
  <span class="k">end</span>
  <span class="n">wrap</span><span class="p">(</span><span class="ss">:dump</span><span class="p">,</span> <span class="n">log</span> <span class="o">||</span> <span class="s2">""</span><span class="p">,</span> <span class="kp">nil</span><span class="p">,</span> <span class="n">fields</span><span class="p">)</span>
  <span class="n">write_output</span><span class="p">(</span><span class="s2">"</span><span class="si">#{</span><span class="n">dump</span><span class="si">}</span><span class="se">\n\n</span><span class="s2">"</span><span class="p">)</span> <span class="k">unless</span> <span class="n">dump</span><span class="p">.</span><span class="nf">nil?</span>
<span class="k">end</span>
</code></pre></div>
</div>

                <div class="from">
                    Defined in
                    <a href="https://github.com/heyvito/logrb/blob/1b8e8a6347aa893ecc3259e3def6c39dc3f0ab88./logrb/lib/logrb.rb#L122" class="dotted">./logrb/lib/logrb.rb
                        , lines 122 to 143</a>
                </div>
            </details>
        </div>
    
        <div class="method-definition"
             id="instance-method-color"
             data-visibility=""
             data-origin="">
            <div class="method-block">
                <div class="method-display-base" >
    
    
    <a class="dashed" href="/logrb/Logrb.html#instance-method-color">
        <div class="container">
            <div class="method-name">color</div>
            
                <div class="argument-container not-empty">
                    
                        <div class="method-argument-base" >
    

    
        color
    


    

    
    
</div>

                    
                        <div class="method-argument-base" >
    

    
        text
    


    

    
    
</div>

                    
                </div>
            
        </div>
    </a>
    <div class="label">private</div>
</div>

            </div>
            
            
            <div class="doc-block">
                <div class="documentation-block-base" >
    
        
            <div class="documentation-comment-base" >
    
        <div class="text-block-base" >
    
        <div class="html">
            
                
                    <span>Formats a given text using the ANSI escape sequences. Notice that this method does not attempt to determine whether the current output supports escape sequences.</span>
                
            
        </div>
    
</div>

    
</div>

        
    
</div>

            </div>
            <details class="source-block">
                <summary>
                    <span class="expanded">Hide Source</span>
                    <span class="collapsed">Show Source</span>
                </summary>
                <div class="markdown-base" >
<div class="highlight"><pre class="highlight ruby"><code><span class="k">def</span> <span class="nf">color</span><span class="p">(</span><span class="n">color</span><span class="p">,</span> <span class="n">text</span><span class="p">)</span>
  <span class="n">bg</span> <span class="o">=</span> <span class="no">BACKGROUNDS</span><span class="p">[</span><span class="n">color</span><span class="p">]</span>
  <span class="n">reset_bg</span> <span class="o">=</span> <span class="s2">""</span>
  <span class="k">if</span> <span class="n">bg</span>
    <span class="n">bg</span> <span class="o">=</span> <span class="s2">"</span><span class="se">\e</span><span class="s2">[</span><span class="si">#{</span><span class="n">bg</span><span class="si">}</span><span class="s2">m"</span>
    <span class="n">reset_bg</span> <span class="o">=</span> <span class="s2">"</span><span class="se">\e</span><span class="s2">[49m"</span>
  <span class="k">end</span>
  <span class="s2">"</span><span class="si">#{</span><span class="n">bg</span><span class="si">}</span><span class="se">\e</span><span class="s2">[</span><span class="si">#{</span><span class="no">COLORS</span><span class="p">[</span><span class="n">color</span><span class="p">]</span><span class="si">}</span><span class="s2">m</span><span class="si">#{</span><span class="n">text</span><span class="si">}</span><span class="se">\e</span><span class="s2">[</span><span class="si">#{</span><span class="no">COLORS</span><span class="p">[</span><span class="ss">:reset</span><span class="p">]</span><span class="si">}</span><span class="s2">m</span><span class="si">#{</span><span class="n">reset_bg</span><span class="si">}</span><span class="s2">"</span>
<span class="k">end</span>
</code></pre></div>
</div>

                <div class="from">
                    Defined in
                    <a href="https://github.com/heyvito/logrb/blob/1b8e8a6347aa893ecc3259e3def6c39dc3f0ab88./logrb/lib/logrb.rb#L150" class="dotted">./logrb/lib/logrb.rb
                        , lines 150 to 158</a>
                </div>
            </details>
        </div>
    
        <div class="method-definition"
             id="instance-method-clean_caller_locations"
             data-visibility=""
             data-origin="">
            <div class="method-block">
                <div class="method-display-base" >
    
    
    <a class="dashed" href="/logrb/Logrb.html#instance-method-clean_caller_locations">
        <div class="container">
            <div class="method-name">clean_caller_locations</div>
            
                <div class="argument-container">
                    
                </div>
            
        </div>
    </a>
    <div class="label">private</div>
</div>

            </div>
            
            
            <div class="doc-block">
                <div class="documentation-block-base" >
    
        
            <div class="documentation-comment-base" >
    
        <div class="text-block-base" >
    
        <div class="html">
            
                
                    <span>Removes all backtrace frames pointing to the logging facility itself.</span>
                
            
        </div>
    
</div>

    
</div>

        
    
</div>

            </div>
            <details class="source-block">
                <summary>
                    <span class="expanded">Hide Source</span>
                    <span class="collapsed">Show Source</span>
                </summary>
                <div class="markdown-base" >
<div class="highlight"><pre class="highlight ruby"><code><span class="k">def</span> <span class="nf">clean_caller_locations</span>
  <span class="n">caller_locations</span><span class="p">.</span><span class="nf">reject</span> <span class="p">{</span> <span class="o">|</span><span class="n">t</span><span class="o">|</span> <span class="n">t</span><span class="p">.</span><span class="nf">absolute_path</span><span class="o">&amp;</span><span class="p">.</span><span class="nf">end_with?</span><span class="p">(</span><span class="s2">"logrb.rb"</span><span class="p">)</span> <span class="p">}</span>
<span class="k">end</span>
</code></pre></div>
</div>

                <div class="from">
                    Defined in
                    <a href="https://github.com/heyvito/logrb/blob/1b8e8a6347aa893ecc3259e3def6c39dc3f0ab88./logrb/lib/logrb.rb#L162" class="dotted">./logrb/lib/logrb.rb
                        , lines 162 to 164</a>
                </div>
            </details>
        </div>
    
        <div class="method-definition"
             id="instance-method-determine_caller"
             data-visibility=""
             data-origin="">
            <div class="method-block">
                <div class="method-display-base" >
    
    
    <a class="dashed" href="/logrb/Logrb.html#instance-method-determine_caller">
        <div class="container">
            <div class="method-name">determine_caller</div>
            
                <div class="argument-container">
                    
                </div>
            
        </div>
    </a>
    <div class="label">private</div>
</div>

            </div>
            
            
            <div class="doc-block">
                <div class="documentation-block-base" >
    
        
            <div class="documentation-comment-base" >
    
        <div class="text-block-base" >
    
        <div class="html">
            
                
                    <span>Returns the caller of a function, returning a pair containing its path and base method name.</span>
                
            
        </div>
    
</div>

    
</div>

        
    
</div>

            </div>
            <details class="source-block">
                <summary>
                    <span class="expanded">Hide Source</span>
                    <span class="collapsed">Show Source</span>
                </summary>
                <div class="markdown-base" >
<div class="highlight"><pre class="highlight ruby"><code><span class="k">def</span> <span class="nf">determine_caller</span>
  <span class="n">c</span> <span class="o">=</span> <span class="n">clean_caller_locations</span><span class="p">.</span><span class="nf">first</span>
  <span class="p">[</span><span class="n">normalize_location</span><span class="p">(</span><span class="n">c</span><span class="p">),</span> <span class="n">c</span><span class="p">.</span><span class="nf">base_label</span><span class="p">]</span>
<span class="k">end</span>
</code></pre></div>
</div>

                <div class="from">
                    Defined in
                    <a href="https://github.com/heyvito/logrb/blob/1b8e8a6347aa893ecc3259e3def6c39dc3f0ab88./logrb/lib/logrb.rb#L168" class="dotted">./logrb/lib/logrb.rb
                        , lines 168 to 171</a>
                </div>
            </details>
        </div>
    
        <div class="method-definition"
             id="instance-method-normalize_location"
             data-visibility=""
             data-origin="">
            <div class="method-block">
                <div class="method-display-base" >
    
    
    <a class="dashed" href="/logrb/Logrb.html#instance-method-normalize_location">
        <div class="container">
            <div class="method-name">normalize_location</div>
            
                <div class="argument-container not-empty">
                    
                        <div class="method-argument-base" >
    

    
        trace
    


    

    
    
</div>

                    
                        <div class="method-argument-base" >
    

    
        include_function_name
    


    
        <span class="continuation colon"></span>
    

    
        <span class="simple-argument symbol">false</span>
    
</div>

                    
                </div>
            
        </div>
    </a>
    <div class="label">private</div>
</div>

            </div>
            
            
            <div class="doc-block">
                <div class="documentation-block-base" >
    
        
            <div class="documentation-comment-base" >
    
        <div class="text-block-base" >
    
        <div class="html">
            
                
                    <span>Performs a cleanup for a given backtrace frame.</span>
                
            
        </div>
    
</div>

    
</div>

        
            <div class="documentation-comment-base" >
    
        <div class="field-block-base" >
    <h3>Arguments</h3>
    <table>
        <tbody>
        
            <tr>
                <td class="name">trace</td>
                <td class="value">
                    <div class="documentation-comment-base" >
    
        <div class="text-block-base" >
    
        <div class="html">
            
                
                    <span>Trace to be clean.</span>
                
            
        </div>
    
</div>

    
</div>

                </td>
            </tr>
        
            <tr>
                <td class="name">include_function_name</td>
                <td class="value">
                    <div class="documentation-comment-base" >
    
        <div class="text-block-base" >
    
        <div class="html">
            
                
                    <span>Optional. When true, includes the function name on the normalized string. Defaults to false.</span>
                
            
        </div>
    
</div>

    
</div>

                </td>
            </tr>
        
        </tbody>
    </table>
</div>

    
</div>

        
    
</div>

            </div>
            <details class="source-block">
                <summary>
                    <span class="expanded">Hide Source</span>
                    <span class="collapsed">Show Source</span>
                </summary>
                <div class="markdown-base" >
<div class="highlight"><pre class="highlight ruby"><code><span class="k">def</span> <span class="nf">normalize_location</span><span class="p">(</span><span class="n">trace</span><span class="p">,</span> <span class="ss">include_function_name: </span><span class="kp">false</span><span class="p">)</span>
  <span class="n">path</span> <span class="o">=</span> <span class="n">trace</span><span class="p">.</span><span class="nf">absolute_path</span>
  <span class="k">return</span> <span class="n">trace</span><span class="p">.</span><span class="nf">to_s</span> <span class="k">if</span> <span class="n">path</span><span class="p">.</span><span class="nf">nil?</span>
   <span class="k">if</span> <span class="p">(</span><span class="n">root</span> <span class="o">=</span> <span class="no">Gem</span><span class="p">.</span><span class="nf">path</span><span class="p">.</span><span class="nf">find</span> <span class="p">{</span> <span class="o">|</span><span class="nb">p</span><span class="o">|</span> <span class="n">path</span><span class="p">.</span><span class="nf">start_with?</span><span class="p">(</span><span class="nb">p</span><span class="p">)</span> <span class="p">})</span>
    <span class="n">path</span> <span class="o">=</span> <span class="s2">"$GEM_PATH</span><span class="si">#{</span><span class="n">path</span><span class="p">[</span><span class="n">root</span><span class="p">.</span><span class="nf">length</span><span class="o">..</span><span class="p">]</span><span class="si">}</span><span class="s2">"</span>
  <span class="k">end</span>
  <span class="s2">"</span><span class="si">#{</span><span class="n">path</span><span class="si">}</span><span class="s2">:</span><span class="si">#{</span><span class="n">trace</span><span class="p">.</span><span class="nf">lineno</span><span class="si">}#{</span><span class="n">include_function_name</span> <span class="p">?</span> <span class="s2">" in `</span><span class="si">#{</span><span class="n">trace</span><span class="p">.</span><span class="nf">label</span><span class="si">}</span><span class="s2">'"</span> <span class="p">:</span> <span class="s2">""</span><span class="si">}</span><span class="s2">"</span>
<span class="k">end</span>
</code></pre></div>
</div>

                <div class="from">
                    Defined in
                    <a href="https://github.com/heyvito/logrb/blob/1b8e8a6347aa893ecc3259e3def6c39dc3f0ab88./logrb/lib/logrb.rb#L178" class="dotted">./logrb/lib/logrb.rb
                        , lines 178 to 186</a>
                </div>
            </details>
        </div>
    
        <div class="method-definition"
             id="instance-method-stack_trace"
             data-visibility=""
             data-origin="">
            <div class="method-block">
                <div class="method-display-base" >
    
    
    <a class="dashed" href="/logrb/Logrb.html#instance-method-stack_trace">
        <div class="container">
            <div class="method-name">stack_trace</div>
            
                <div class="argument-container not-empty">
                    
                        <div class="method-argument-base" >
    

    
        trace
    


    
        <span class="continuation equal"></span>
    

    
        <span class="simple-argument call">clean_caller_locations</span>
    
</div>

                    
                </div>
            
        </div>
    </a>
    <div class="label">private</div>
</div>

            </div>
            
            
            <div class="doc-block">
                <div class="documentation-block-base" >
    
        
            <div class="documentation-comment-base" >
    
        <div class="text-block-base" >
    
        <div class="html">
            
                
                    <span>Returns a string containing a stacktrace of the current invocation.</span>
                
            
        </div>
    
</div>

    
</div>

        
    
</div>

            </div>
            <details class="source-block">
                <summary>
                    <span class="expanded">Hide Source</span>
                    <span class="collapsed">Show Source</span>
                </summary>
                <div class="markdown-base" >
<div class="highlight"><pre class="highlight ruby"><code><span class="k">def</span> <span class="nf">stack_trace</span><span class="p">(</span><span class="n">trace</span> <span class="o">=</span> <span class="n">clean_caller_locations</span><span class="p">)</span>
  <span class="n">trace</span><span class="p">.</span><span class="nf">map</span> <span class="p">{</span> <span class="o">|</span><span class="n">s</span><span class="o">|</span> <span class="n">normalize_location</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="ss">include_function_name: </span><span class="kp">true</span><span class="p">)</span> <span class="p">}.</span><span class="nf">join</span><span class="p">(</span><span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">)</span>
<span class="k">end</span>
</code></pre></div>
</div>

                <div class="from">
                    Defined in
                    <a href="https://github.com/heyvito/logrb/blob/1b8e8a6347aa893ecc3259e3def6c39dc3f0ab88./logrb/lib/logrb.rb#L190" class="dotted">./logrb/lib/logrb.rb
                        , lines 190 to 192</a>
                </div>
            </details>
        </div>
    
        <div class="method-definition"
             id="instance-method-compose_line"
             data-visibility=""
             data-origin="">
            <div class="method-block">
                <div class="method-display-base" >
    
    
    <a class="dashed" href="/logrb/Logrb.html#instance-method-compose_line">
        <div class="container">
            <div class="method-name">compose_line</div>
            
                <div class="argument-container not-empty">
                    
                        <div class="method-argument-base" >
    

    
        level
    


    

    
    
</div>

                    
                        <div class="method-argument-base" >
    

    
        caller_meta
    


    

    
    
</div>

                    
                        <div class="method-argument-base" >
    

    
        msg
    


    

    
    
</div>

                    
                        <div class="method-argument-base" >
    

    
        fields
    


    

    
    
</div>

                    
                </div>
            
        </div>
    </a>
    <div class="label">private</div>
</div>

            </div>
            
            
            <div class="doc-block">
                <div class="documentation-block-base" >
    
        
            <div class="documentation-comment-base" >
    
        <div class="text-block-base" >
    
        <div class="html">
            
                
                    <span>Composes a log line with given information.</span>
                
            
        </div>
    
</div>

    
</div>

        
            <div class="documentation-comment-base" >
    
        <div class="field-block-base" >
    <h3>Arguments</h3>
    <table>
        <tbody>
        
            <tr>
                <td class="name">level</td>
                <td class="value">
                    <div class="documentation-comment-base" >
    
        <div class="text-block-base" >
    
        <div class="html">
            
                
                    <span>The severity of the log message</span>
                
            
        </div>
    
</div>

    
</div>

                </td>
            </tr>
        
            <tr>
                <td class="name">caller_meta</td>
                <td class="value">
                    <div class="documentation-comment-base" >
    
        <div class="text-block-base" >
    
        <div class="html">
            
                
                    <span>An Array containing the caller&#39;s location and name</span>
                
            
        </div>
    
</div>

    
</div>

                </td>
            </tr>
        
            <tr>
                <td class="name">msg</td>
                <td class="value">
                    <div class="documentation-comment-base" >
    
        <div class="text-block-base" >
    
        <div class="html">
            
                
                    <span>The message to be logged</span>
                
            
        </div>
    
</div>

    
</div>

                </td>
            </tr>
        
            <tr>
                <td class="name">fields</td>
                <td class="value">
                    <div class="documentation-comment-base" >
    
        <div class="text-block-base" >
    
        <div class="html">
            
                
                    <span>A Hash of fields to be included in the entry</span>
                
            
        </div>
    
</div>

    
</div>

                </td>
            </tr>
        
        </tbody>
    </table>
</div>

    
</div>

        
    
</div>

            </div>
            <details class="source-block">
                <summary>
                    <span class="expanded">Hide Source</span>
                    <span class="collapsed">Show Source</span>
                </summary>
                <div class="markdown-base" >
<div class="highlight"><pre class="highlight ruby"><code><span class="k">def</span> <span class="nf">compose_line</span><span class="p">(</span><span class="n">level</span><span class="p">,</span> <span class="n">caller_meta</span><span class="p">,</span> <span class="n">msg</span><span class="p">,</span> <span class="n">fields</span><span class="p">)</span>
  <span class="n">ts</span> <span class="o">=</span> <span class="no">Time</span><span class="p">.</span><span class="nf">now</span><span class="p">.</span><span class="nf">strftime</span><span class="p">(</span><span class="s2">"%Y-%m-%dT%H:%M:%S.%L%z"</span><span class="p">)</span>
  <span class="n">msg</span> <span class="o">=</span> <span class="s2">" </span><span class="si">#{</span><span class="n">msg</span><span class="si">}</span><span class="s2">"</span> <span class="k">unless</span> <span class="n">msg</span><span class="p">.</span><span class="nf">empty?</span>
  <span class="n">fields_str</span> <span class="o">=</span> <span class="k">if</span> <span class="n">fields</span><span class="p">.</span><span class="nf">empty?</span>
                 <span class="s2">""</span>
               <span class="k">else</span>
                 <span class="s2">" </span><span class="si">#{</span><span class="n">fields</span><span class="si">}</span><span class="s2">"</span>
               <span class="k">end</span>
  <span class="n">level_str</span> <span class="o">=</span> <span class="n">color</span><span class="p">(</span><span class="n">level</span><span class="p">,</span> <span class="n">level</span><span class="p">.</span><span class="nf">to_s</span><span class="p">.</span><span class="nf">upcase</span><span class="p">)</span>
  <span class="s2">"</span><span class="si">#{</span><span class="n">ts</span><span class="si">}</span><span class="s2"> </span><span class="si">#{</span><span class="n">level_str</span><span class="si">}</span><span class="s2">: </span><span class="si">#{</span><span class="n">caller_meta</span><span class="p">.</span><span class="nf">last</span><span class="si">}</span><span class="s2">:</span><span class="si">#{</span><span class="n">msg</span><span class="si">}#{</span><span class="n">fields_str</span><span class="si">}</span><span class="s2">"</span>
<span class="k">end</span>
</code></pre></div>
</div>

                <div class="from">
                    Defined in
                    <a href="https://github.com/heyvito/logrb/blob/1b8e8a6347aa893ecc3259e3def6c39dc3f0ab88./logrb/lib/logrb.rb#L200" class="dotted">./logrb/lib/logrb.rb
                        , lines 200 to 210</a>
                </div>
            </details>
        </div>
    
        <div class="method-definition"
             id="instance-method-text"
             data-visibility=""
             data-origin="">
            <div class="method-block">
                <div class="method-display-base" >
    
    
    <a class="dashed" href="/logrb/Logrb.html#instance-method-text">
        <div class="container">
            <div class="method-name">text</div>
            
                <div class="argument-container not-empty">
                    
                        <div class="method-argument-base" >
    

    
        level
    


    

    
    
</div>

                    
                        <div class="method-argument-base" >
    

    
        msg
    


    

    
    
</div>

                    
                        <div class="method-argument-base" >
    

    
        error
    


    

    
    
</div>

                    
                        <div class="method-argument-base" >
    

    
        fields
    


    

    
    
</div>

                    
                        <div class="method-argument-base" >
    

    
        caller_meta
    


    

    
    
</div>

                    
                </div>
            
        </div>
    </a>
    <div class="label">private</div>
</div>

            </div>
            
            
            <div class="doc-block">
                <div class="documentation-block-base" >
    
        
            <div class="documentation-comment-base" >
    
        <div class="text-block-base" >
    
        <div class="html">
            
                
                    <span>Logs a text entry to the current output.</span>
                
            
        </div>
    
</div>

    
</div>

        
            <div class="documentation-comment-base" >
    
        <div class="field-block-base" >
    <h3>Arguments</h3>
    <table>
        <tbody>
        
            <tr>
                <td class="name">level</td>
                <td class="value">
                    <div class="documentation-comment-base" >
    
        <div class="text-block-base" >
    
        <div class="html">
            
                
                    <span>The severity of the message to be logged.</span>
                
            
        </div>
    
</div>

    
</div>

                </td>
            </tr>
        
            <tr>
                <td class="name">msg</td>
                <td class="value">
                    <div class="documentation-comment-base" >
    
        <div class="text-block-base" >
    
        <div class="html">
            
                
                    <span>The message to be logged</span>
                
            
        </div>
    
</div>

    
</div>

                </td>
            </tr>
        
            <tr>
                <td class="name">error</td>
                <td class="value">
                    <div class="documentation-comment-base" >
    
        <div class="text-block-base" >
    
        <div class="html">
            
                
                    <span>Either an Exception object or nil. This parameter is used to provide extra information on the logged entry.</span>
                
            
        </div>
    
</div>

    
</div>

                </td>
            </tr>
        
            <tr>
                <td class="name">fields</td>
                <td class="value">
                    <div class="documentation-comment-base" >
    
        <div class="text-block-base" >
    
        <div class="html">
            
                
                    <span>A Hash containing metadata to be included in the logged entry.</span>
                
            
        </div>
    
</div>

    
</div>

                </td>
            </tr>
        
            <tr>
                <td class="name">caller_meta</td>
                <td class="value">
                    <div class="documentation-comment-base" >
    
        <div class="text-block-base" >
    
        <div class="html">
            
                
                    <span>An Array containing the caller&#39;s location and name.</span>
                
            
        </div>
    
</div>

    
</div>

                </td>
            </tr>
        
        </tbody>
    </table>
</div>

    
</div>

        
    
</div>

            </div>
            <details class="source-block">
                <summary>
                    <span class="expanded">Hide Source</span>
                    <span class="collapsed">Show Source</span>
                </summary>
                <div class="markdown-base" >
<div class="highlight"><pre class="highlight ruby"><code><span class="k">def</span> <span class="nf">text</span><span class="p">(</span><span class="n">level</span><span class="p">,</span> <span class="n">msg</span><span class="p">,</span> <span class="n">error</span><span class="p">,</span> <span class="n">fields</span><span class="p">,</span> <span class="n">caller_meta</span><span class="p">)</span>
  <span class="n">fields</span> <span class="o">||=</span> <span class="p">{}</span>
  <span class="n">fields</span><span class="p">.</span><span class="nf">merge!</span> <span class="vi">@fields</span>
  <span class="n">write_output</span><span class="p">(</span><span class="n">compose_line</span><span class="p">(</span><span class="n">level</span><span class="p">,</span> <span class="n">caller_meta</span><span class="p">,</span> <span class="n">msg</span><span class="p">,</span> <span class="n">fields</span><span class="p">))</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">error_message</span> <span class="o">=</span> <span class="n">error</span><span class="o">&amp;</span><span class="p">.</span><span class="nf">message</span><span class="p">)</span>
    <span class="n">write_output</span><span class="p">(</span><span class="s2">": </span><span class="si">#{</span><span class="n">error_message</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
  <span class="k">end</span>
  <span class="n">write_output</span><span class="p">(</span><span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">)</span>
  <span class="k">return</span> <span class="k">unless</span> <span class="n">level</span> <span class="o">==</span> <span class="ss">:error</span>
   <span class="n">backtrace_str</span> <span class="o">=</span> <span class="n">backtrace</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>
                  <span class="p">.</span><span class="nf">split</span><span class="p">(</span><span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">)</span>
                  <span class="p">.</span><span class="nf">map</span> <span class="p">{</span> <span class="o">|</span><span class="n">s</span><span class="o">|</span> <span class="s2">"        </span><span class="si">#{</span><span class="n">s</span><span class="si">}</span><span class="s2">"</span> <span class="p">}.</span><span class="nf">join</span><span class="p">(</span><span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">)</span>
  <span class="n">write_output</span><span class="p">(</span><span class="n">backtrace_str</span><span class="p">)</span>
  <span class="n">write_output</span><span class="p">(</span><span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">)</span>
<span class="k">end</span>
</code></pre></div>
</div>

                <div class="from">
                    Defined in
                    <a href="https://github.com/heyvito/logrb/blob/1b8e8a6347aa893ecc3259e3def6c39dc3f0ab88./logrb/lib/logrb.rb#L221" class="dotted">./logrb/lib/logrb.rb
                        , lines 221 to 236</a>
                </div>
            </details>
        </div>
    
        <div class="method-definition"
             id="instance-method-backtrace"
             data-visibility=""
             data-origin="">
            <div class="method-block">
                <div class="method-display-base" >
    
    
    <a class="dashed" href="/logrb/Logrb.html#instance-method-backtrace">
        <div class="container">
            <div class="method-name">backtrace</div>
            
                <div class="argument-container not-empty">
                    
                        <div class="method-argument-base" >
    

    
        from
    


    

    
    
</div>

                    
                </div>
            
        </div>
    </a>
    <div class="label">private</div>
</div>

            </div>
            
            
            <div class="doc-block">
                <div class="documentation-block-base" >
    
        
            <div class="documentation-comment-base" >
    
        <div class="text-block-base" >
    
        <div class="html">
            
                
                    <span>Attempts to obtain a backtrace from a provided object. In case the object does not include backtrace metadata, uses </span>
                
            
                
                    <div class="documentation-comment-base" >
    
        <a class="method-ref dashed" href="/logrb/Logrb.html#instance-method-stack_trace">#stack_trace</a>
    
</div>

                
            
                
                    <span> as a fallback.</span>
                
            
        </div>
    
</div>

    
</div>

        
    
</div>

            </div>
            <details class="source-block">
                <summary>
                    <span class="expanded">Hide Source</span>
                    <span class="collapsed">Show Source</span>
                </summary>
                <div class="markdown-base" >
<div class="highlight"><pre class="highlight ruby"><code><span class="k">def</span> <span class="nf">backtrace</span><span class="p">(</span><span class="n">from</span><span class="p">)</span>
  <span class="k">if</span> <span class="n">from</span><span class="p">.</span><span class="nf">respond_to?</span><span class="p">(</span><span class="ss">:backtrace_locations</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="n">from</span><span class="p">.</span><span class="nf">backtrace_locations</span><span class="p">.</span><span class="nf">nil?</span>
    <span class="n">stack_trace</span><span class="p">(</span><span class="n">from</span><span class="p">.</span><span class="nf">backtrace_locations</span><span class="p">)</span>
  <span class="k">else</span>
    <span class="n">stack_trace</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div>
</div>

                <div class="from">
                    Defined in
                    <a href="https://github.com/heyvito/logrb/blob/1b8e8a6347aa893ecc3259e3def6c39dc3f0ab88./logrb/lib/logrb.rb#L241" class="dotted">./logrb/lib/logrb.rb
                        , lines 241 to 247</a>
                </div>
            </details>
        </div>
    
        <div class="method-definition"
             id="instance-method-write_output"
             data-visibility=""
             data-origin="">
            <div class="method-block">
                <div class="method-display-base" >
    
    
    <a class="dashed" href="/logrb/Logrb.html#instance-method-write_output">
        <div class="container">
            <div class="method-name">write_output</div>
            
                <div class="argument-container not-empty">
                    
                        <div class="method-argument-base" >
    

    
        text
    


    

    
    
</div>

                    
                </div>
            
        </div>
    </a>
    <div class="label">private</div>
</div>

            </div>
            
            
            <div class="doc-block">
                <div class="documentation-block-base" >
    
        
            <div class="documentation-comment-base" >
    
        <div class="text-block-base" >
    
        <div class="html">
            
                
                    <span>Writes a given value to the current&#39;s output IO. Calls to this method are thread-safe.</span>
                
            
        </div>
    
</div>

    
</div>

        
    
</div>

            </div>
            <details class="source-block">
                <summary>
                    <span class="expanded">Hide Source</span>
                    <span class="collapsed">Show Source</span>
                </summary>
                <div class="markdown-base" >
<div class="highlight"><pre class="highlight ruby"><code><span class="k">def</span> <span class="nf">write_output</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
  <span class="no">Logrb</span><span class="p">.</span><span class="nf">mutex</span><span class="p">.</span><span class="nf">synchronize</span> <span class="k">do</span>
    <span class="vi">@output</span><span class="p">.</span><span class="nf">write</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div>
</div>

                <div class="from">
                    Defined in
                    <a href="https://github.com/heyvito/logrb/blob/1b8e8a6347aa893ecc3259e3def6c39dc3f0ab88./logrb/lib/logrb.rb#L251" class="dotted">./logrb/lib/logrb.rb
                        , lines 251 to 255</a>
                </div>
            </details>
        </div>
    
        <div class="method-definition"
             id="instance-method-json"
             data-visibility=""
             data-origin="">
            <div class="method-block">
                <div class="method-display-base" >
    
    
    <a class="dashed" href="/logrb/Logrb.html#instance-method-json">
        <div class="container">
            <div class="method-name">json</div>
            
                <div class="argument-container not-empty">
                    
                        <div class="method-argument-base" >
    

    
        level
    


    

    
    
</div>

                    
                        <div class="method-argument-base" >
    

    
        msg
    


    

    
    
</div>

                    
                        <div class="method-argument-base" >
    

    
        error
    


    

    
    
</div>

                    
                        <div class="method-argument-base" >
    

    
        fields
    


    

    
    
</div>

                    
                        <div class="method-argument-base" >
    

    
        caller_meta
    


    

    
    
</div>

                    
                </div>
            
        </div>
    </a>
    <div class="label">private</div>
</div>

            </div>
            
            
            <div class="doc-block">
                <div class="documentation-block-base" >
    
        
            <div class="documentation-comment-base" >
    
        <div class="text-block-base" >
    
        <div class="html">
            
                
                    <span>Logs a JSON entry to the current output.</span>
                
            
        </div>
    
</div>

    
</div>

        
            <div class="documentation-comment-base" >
    
        <div class="field-block-base" >
    <h3>Arguments</h3>
    <table>
        <tbody>
        
            <tr>
                <td class="name">level</td>
                <td class="value">
                    <div class="documentation-comment-base" >
    
        <div class="text-block-base" >
    
        <div class="html">
            
                
                    <span>The severity of the message to be logged.</span>
                
            
        </div>
    
</div>

    
</div>

                </td>
            </tr>
        
            <tr>
                <td class="name">msg</td>
                <td class="value">
                    <div class="documentation-comment-base" >
    
        <div class="text-block-base" >
    
        <div class="html">
            
                
                    <span>The message to be logged</span>
                
            
        </div>
    
</div>

    
</div>

                </td>
            </tr>
        
            <tr>
                <td class="name">error</td>
                <td class="value">
                    <div class="documentation-comment-base" >
    
        <div class="text-block-base" >
    
        <div class="html">
            
                
                    <span>Either an Exception object or nil. This parameter is used to provide extra information on the logged entry.</span>
                
            
        </div>
    
</div>

    
</div>

                </td>
            </tr>
        
            <tr>
                <td class="name">fields</td>
                <td class="value">
                    <div class="documentation-comment-base" >
    
        <div class="text-block-base" >
    
        <div class="html">
            
                
                    <span>A Hash containing metadata to be included in the logged entry.</span>
                
            
        </div>
    
</div>

    
</div>

                </td>
            </tr>
        
            <tr>
                <td class="name">caller_meta</td>
                <td class="value">
                    <div class="documentation-comment-base" >
    
        <div class="text-block-base" >
    
        <div class="html">
            
                
                    <span>An Array containing the caller&#39;s location and name.</span>
                
            
        </div>
    
</div>

    
</div>

                </td>
            </tr>
        
        </tbody>
    </table>
</div>

    
</div>

        
    
</div>

            </div>
            <details class="source-block">
                <summary>
                    <span class="expanded">Hide Source</span>
                    <span class="collapsed">Show Source</span>
                </summary>
                <div class="markdown-base" >
<div class="highlight"><pre class="highlight ruby"><code><span class="k">def</span> <span class="nf">json</span><span class="p">(</span><span class="n">level</span><span class="p">,</span> <span class="n">msg</span><span class="p">,</span> <span class="n">error</span><span class="p">,</span> <span class="n">fields</span><span class="p">,</span> <span class="n">caller_meta</span><span class="p">)</span>
  <span class="n">fields</span> <span class="o">||=</span> <span class="p">{}</span>
  <span class="n">fields</span><span class="p">.</span><span class="nf">merge!</span> <span class="vi">@fields</span>
  <span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
    <span class="ss">level: </span><span class="n">level</span><span class="p">,</span>
    <span class="ss">caller: </span><span class="n">caller_meta</span><span class="p">.</span><span class="nf">first</span><span class="p">,</span>
    <span class="ss">msg: </span><span class="n">msg</span><span class="p">,</span>
    <span class="ss">ts: </span><span class="no">Time</span><span class="p">.</span><span class="nf">now</span><span class="p">.</span><span class="nf">utc</span><span class="p">.</span><span class="nf">to_i</span>
  <span class="p">}</span>
   <span class="n">data</span><span class="p">[</span><span class="ss">:stacktrace</span><span class="p">]</span> <span class="o">=</span> <span class="n">backtrace</span><span class="p">(</span><span class="n">error</span><span class="p">)</span> <span class="k">if</span> <span class="n">level</span> <span class="o">==</span> <span class="ss">:error</span>
   <span class="n">data</span><span class="p">.</span><span class="nf">merge!</span><span class="p">(</span><span class="n">fields</span><span class="p">)</span>
  <span class="n">write_output</span><span class="p">(</span><span class="s2">"</span><span class="si">#{</span><span class="n">data</span><span class="p">.</span><span class="nf">to_json</span><span class="si">}</span><span class="se">\n</span><span class="s2">"</span><span class="p">)</span>
<span class="k">end</span>
</code></pre></div>
</div>

                <div class="from">
                    Defined in
                    <a href="https://github.com/heyvito/logrb/blob/1b8e8a6347aa893ecc3259e3def6c39dc3f0ab88./logrb/lib/logrb.rb#L266" class="dotted">./logrb/lib/logrb.rb
                        , lines 266 to 280</a>
                </div>
            </details>
        </div>
    
        <div class="method-definition"
             id="instance-method-wrap"
             data-visibility=""
             data-origin="">
            <div class="method-block">
                <div class="method-display-base" >
    
    
    <a class="dashed" href="/logrb/Logrb.html#instance-method-wrap">
        <div class="container">
            <div class="method-name">wrap</div>
            
                <div class="argument-container not-empty">
                    
                        <div class="method-argument-base" >
    

    
        level
    


    

    
    
</div>

                    
                        <div class="method-argument-base" >
    

    
        msg
    


    

    
    
</div>

                    
                        <div class="method-argument-base" >
    

    
        error
    


    

    
    
</div>

                    
                        <div class="method-argument-base" >
    

    
        fields
    


    

    
    
</div>

                    
                </div>
            
        </div>
    </a>
    <div class="label">private</div>
</div>

            </div>
            
            
            <div class="doc-block">
                <div class="documentation-block-base" >
    
        
            <div class="documentation-comment-base" >
    
        <div class="text-block-base" >
    
        <div class="html">
            
                
                    <span>Dynamically invokes the current log formatter for the provided arguments. For further information, see </span>
                
            
                
                    <div class="documentation-comment-base" >
    
        <a class="method-ref dashed" href="/logrb/Logrb.html#instance-method-text">#text</a>
    
</div>

                
            
                
                    <span> and </span>
                
            
                
                    <div class="documentation-comment-base" >
    
        <a class="method-ref dashed" href="/logrb/Logrb.html#instance-method-json">#json</a>
    
</div>

                
            
        </div>
    
</div>

    
</div>

        
    
</div>

            </div>
            <details class="source-block">
                <summary>
                    <span class="expanded">Hide Source</span>
                    <span class="collapsed">Show Source</span>
                </summary>
                <div class="markdown-base" >
<div class="highlight"><pre class="highlight ruby"><code><span class="k">def</span> <span class="nf">wrap</span><span class="p">(</span><span class="n">level</span><span class="p">,</span> <span class="n">msg</span><span class="p">,</span> <span class="n">error</span><span class="p">,</span> <span class="n">fields</span><span class="p">)</span>
  <span class="n">msg</span> <span class="o">=</span> <span class="n">msg</span><span class="p">.</span><span class="nf">to_s</span>
  <span class="nb">send</span><span class="p">(</span><span class="vi">@format</span><span class="p">,</span> <span class="n">level</span><span class="p">,</span> <span class="n">msg</span><span class="p">,</span> <span class="n">error</span><span class="p">,</span> <span class="n">fields</span><span class="p">,</span> <span class="n">determine_caller</span><span class="p">)</span>
  <span class="nb">exit</span> <span class="mi">1</span> <span class="k">if</span> <span class="n">level</span> <span class="o">==</span> <span class="ss">:fatal</span>
<span class="k">end</span>
</code></pre></div>
</div>

                <div class="from">
                    Defined in
                    <a href="https://github.com/heyvito/logrb/blob/1b8e8a6347aa893ecc3259e3def6c39dc3f0ab88./logrb/lib/logrb.rb#L284" class="dotted">./logrb/lib/logrb.rb
                        , lines 284 to 288</a>
                </div>
            </details>
        </div>
    
</div>

            </div>
        
    </div>
    <div class="right">
        
            <h3>In this Page</h3>
            
                
                    <div><a href="#class-documentation" class="dotted">Class Documentation</a></div>
                
            
                
            
                
                    <div><a href="#constants" class="dotted">Constants</a></div>
                
            
                
            
                
                    <div><a href="#instance-attributes" class="dotted">Instance Attributes</a></div>
                
            
                
                    <div><a href="#class-methods" class="dotted">Class Methods</a></div>
                
            
                
                    <div><a href="#instance-methods" class="dotted">Instance Methods</a></div>
                
            
        
    </div>
</div>
<div class="footer-base" >
    <div class="left">
        Last updated Saturday, 28 Oct 2023 23:18:43 -03
    </div>
    <div class="right">
        Generated by <a href="https://github.com/heyvito/docrb" class="dashed" rel="nofollow" target="_blank">Docrb</a>
        version 0.3.2
    </div>
</div>

    
    <script type="text/javascript" src="/logrb/filtering.js"></script>
</body>
</html>
